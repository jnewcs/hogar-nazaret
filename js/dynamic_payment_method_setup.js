document.addEventListener("DOMContentLoaded",function(){if(!ATHM_Checkout||!window.stripeInstance){window.trackEvent("failed_to_finish_setting_up_payment_methods");return}var s=document.querySelector('input[name="give_a_hug_donation_amount"]:checked').value,n=document.getElementById("give-custom-gift-amount"),t=window.stripeInstance.paymentRequest({country:"US",currency:"usd",total:{amount:parseFloat(s).toFixed(2)*100,label:window.campaignDonationDescription},requestPayerName:!0,requestPayerEmail:!0});t.on("token",function(e){window.handleStripeTokenSubmission(e,"payment_request")}),t.on("cancel",function(){window.trackEvent("stripe_elements_cancel",{type:"payment_request"})});var r=window.stripeElements.create("paymentRequestButton",{paymentRequest:t,style:{paymentRequestButton:{type:"donate"}}});t.canMakePayment().then(function(e){e&&e.applePay&&(window.trackEvent("showing_apple_pay_donation"),r.mount("#payment-request-button-for-campaign"),document.getElementById("payment-request-button-for-campaign-container").classList.remove("is-hidden"))});var o=document.querySelectorAll('input[name="give_a_hug_donation_amount"]'),i=function(e){(!e||isNaN(e))&&(e=1),ATHM_Checkout.total=e,ATHM_Checkout.subtotal=e,ATHM_Checkout.items[0].price=e,t.update({total:{amount:e*100,label:window.campaignDonationDescription}})},u=document.getElementById("give-custom-gift-amount-container");n.onchange=function(){var e=parseFloat(this.value).toFixed(2);i(e)},n.onblur=function(){var e=parseFloat(this.value);e?this.value=e.toFixed(2):this.value=1};for(var a=0,c=o.length;a<c;a++)o[a].onclick=function(){var e;this.value!=="custom"?(u.classList.add("is-hidden"),e=parseFloat(this.value).toFixed(2),n.value=1):(u.classList.remove("is-hidden"),e=parseFloat(n.value).toFixed(2)),i(e)}});
