document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("hosted-fields");if(t){let L=function(n){var i="input[type='text'], input[type='email'], input[type='number'], input[name='give_a_hug_donation_amount']";function u(){Array.prototype.forEach.call(c.querySelectorAll(i),function(e){e.removeAttribute("disabled")})}function d(){Array.prototype.forEach.call(c.querySelectorAll(i),function(e){e.setAttribute("disabled","true")})}function l(){var e=document.createElement("input");e.type="submit",e.style.display="none",c.appendChild(e),e.click(),e.remove()}var o={},h=function(e){v.classList.remove("is-hidden"),_.innerText=e};n.forEach(function(e,r){e.on("change",function(a){if(a.error)o[r]=a.error.message,h(a.error.message);else{o[r]=null;var s=Object.keys(o).sort().reduce(function(p,g){return p||o[g]},null);s?_.innerText=s:v.classList.add("is-hidden")}})}),c.addEventListener("submit",function(e){e.preventDefault();var r="input[type='text'], input[type='email'], input[type='number'], input.validate-field[name='give_a_hug_donation_amount']",a=!0;if(Array.prototype.forEach.call(c.querySelectorAll(r),function(m){if(m.checkValidity&&!m.checkValidity()){a=!1;return}}),!a){l();return}b.classList.remove("is-hidden"),t.classList.add("submitting"),E.classList.add("is-hidden"),d();var s=t.querySelector("#hosted-fields-email"),p=t.querySelector("#hosted-fields-zip"),g={email:s?s.value:void 0,address_zip:p?p.value:void 0};window.stripeInstance.createToken(n[0],g).then(function(m){window.handleStripeTokenSubmission(m,"stripe_elements",u)})})};var A=L,q=t.dataset.key,w=t.dataset.lang;window.campaignDonationDescription=t.dataset.description;var B=t.dataset.env,T=t.dataset.success,x=t.dataset.error,c=document.getElementById("payment_interface_form"),v=t.querySelector(".error"),_=v.querySelector(".notification"),b=document.getElementById("give-a-hug-donation-options-loading-container"),E=document.getElementById("give-a-hug-donation-options");window.stripeInstance=Stripe(q,{locale:w}),window.stripeElements=window.stripeInstance.elements();var f={base:{color:"#4a4a4a",fontWeight:600,fontFamily:"Quicksand, Open Sans, Segoe UI, sans-serif",fontSize:"16px",fontSmoothing:"antialiased","::placeholder":{color:"#bbb2d7"},":focus::placeholder":{color:"#bbb2d7"}},invalid:{color:"#4a4a4a"}},y={focus:"focus",empty:"empty",invalid:"invalid"},k=window.stripeElements.create("cardNumber",{style:f,classes:y});k.mount("#hosted-fields-card-number");var S=window.stripeElements.create("cardExpiry",{style:f,classes:y});S.mount("#hosted-fields-card-expiry");var I=window.stripeElements.create("cardCvc",{style:f,classes:y});I.mount("#hosted-fields-card-cvc"),window.handleStripeTokenSubmission=function(n,i="stripe_elements",u=null){const d=function(e=!1){b.classList.add("is-hidden"),t.classList.remove("submitting"),E.classList.remove("is-hidden"),u&&u(),e&&(i==="payment_request"&&n.complete("fail"),showError(x))};if(n.token){var l=document.querySelector('input[name="give_a_hug_donation_amount"]:checked').value;l==="custom"&&(l=document.getElementById("give-custom-gift-amount").value);var o=parseFloat(l).toFixed(2)*100,h={amount:o,stripe_token:n.token.id,email:n.payerEmail||n.token.email,description:window.campaignDonationDescription,lang:w,env:B};fetch("https://web-production-9b27.up.railway.app/payments",{method:"POST",body:JSON.stringify(h),headers:{"content-type":"application/json"}}).then(function(e){if(e.ok){window.trackEvent("stripe_elements_payment_success",{amount:o,type:i}),i==="payment_request"&&n.complete("success");var r=document.getElementById("give-a-hug-donation-options-notification");r.innerHTML=T,r.classList.remove("is-hidden");var a=document.getElementById("event-donation-engine-share");a.classList.remove("is-hidden"),d();var s=document.getElementById("event-donation-engine-payment");s.classList.add("is-hidden")}else window.trackEvent("stripe_elements_payment_error",{type:i}),d(!0)}).catch(function(){window.trackEvent("stripe_elements_payment_error",{type:i}),d(!0)})}else window.trackEvent("stripe_elements_token_creation_error",{type:i}),d(!0)},L([k,S,I])}});
