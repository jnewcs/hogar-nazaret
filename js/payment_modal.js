var formContainer=document.getElementById("payment-form-inner-container");if(formContainer){var modalContainer=document.getElementById("donation-content-container"),loadingContainer=document.getElementById("loading-container"),successContainer=document.getElementById("success-container"),errorContainer=document.getElementById("error-container"),closeBtn=document.getElementById("donation-modal-close-btn"),oneTimeAmountField=document.getElementById("one-time-donation-amount"),stripeKey=formContainer.dataset.key,lang=formContainer.dataset.lang,label=formContainer.dataset.label,env=formContainer.dataset.env,initialAmount=parseInt(oneTimeAmountField.value)*100,stripe=Stripe(stripeKey,{locale:lang}),elements=stripe.elements(),paymentRequest=stripe.paymentRequest({country:"US",currency:"usd",total:{amount:initialAmount,label},requestPayerName:!0,requestPayerEmail:!0});paymentRequest.on("token",function(e){modalContainer.classList.add("is-hidden"),successContainer.classList.add("is-hidden"),errorContainer.classList.add("is-hidden"),closeBtn.classList.add("is-hidden"),loadingContainer.classList.remove("is-hidden");var t=parseInt(oneTimeAmountField.value)*100,a={amount:t,stripe_token:e.token.id,email:e.payerEmail,lang,env};const n=function(){modalContainer.classList.add("is-hidden"),loadingContainer.classList.add("is-hidden"),successContainer.classList.add("is-hidden"),errorContainer.classList.remove("is-hidden"),closeBtn.classList.remove("is-hidden"),e.complete("fail")};fetch("https://web-production-9b27.up.railway.app/payments",{method:"POST",body:JSON.stringify(a),headers:{"content-type":"application/json"}}).then(function(s){s.ok?(modalContainer.classList.add("is-hidden"),loadingContainer.classList.add("is-hidden"),errorContainer.classList.add("is-hidden"),successContainer.classList.remove("is-hidden"),closeBtn.classList.remove("is-hidden"),window.trackEvent("stripe_payment_request_sucess"),e.complete("success")):n()}).catch(function(){n()})});var paymentRequestElement=elements.create("paymentRequestButton",{paymentRequest,style:{paymentRequestButton:{type:"donate"}}});paymentRequest.canMakePayment().then(function(e){e?(paymentRequestElement.mount("#payment-request-button"),oneTimeAmountField.addEventListener("change",function(t){var a=parseInt(t.target.value)*100;paymentRequest.update({total:{amount:a,label}})})):(formContainer.classList.add("is-hidden"),document.getElementById("payment-divider-for-one-time-donation").classList.add("is-hidden"))})}
